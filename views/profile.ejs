<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/css/profile.css" />
<form action="" method="post" class="confirm-update update-profile">
<h1><%= user.username %></h1>
<h2>Email: <%= user.email %></h2>
<h2>
    <label for="status">Role: </label>
	<select name="status" id="status">
		<option value="Leader" <%= user.status==='Leader'? 'selected':'' %>>Leader</option>
		<option value="Alumni" <%= user.status==='Alumni'? 'selected':'' %>>Alumni</option>
		<option value="Coach" <%= user.status==='Coach'? 'selected':'' %>>Coach</option>
    </select>
</h2>
<h2><div id="cpClass-box"><span>
				<label for="cpClass-year">Class</label>
				<input
					type="number"
					id="cpClass-year"
					name="cpClass[year]"
					min="2010"
					placeholder="Year"
                    value="<%= user.cpClass?user.cpClass.year:2010 %>"
				/>
				<select type="text" id="cpClass-class" name="cpClass[class]">
					<option value="C1"<%= user.cpClass?(user.cpClass.class==='C1'? 'selected':''):'' %>>C1</option>
					<option value="C2"<%= user.cpClass?(user.cpClass.class==='C2'? 'selected':''):'' %>>C2</option>
					<option value="C3"<%= user.cpClass?(user.cpClass.class==='C3'? 'selected':''):'' %>>C3</option>
					<option value="C4"<%= user.cpClass?(user.cpClass.class==='C4'? 'selected':''):'' %>>C4</option>
				</select>
				<input
					type="text"
					id="cpClass-location"
					name="cpClass[location]"
					maxlength="3"
					placeholder="DEN"
                    value="<%= user.cpClass?user.cpClass.location:'DEN' %>"
				/>
			</span></div></h2>    
<a href="/change-password">Change Password</a>
<div class="save-or-reset">
<button type="submit">Save</button><button type="reset" id="reset">Reset</button>
</div>
<div class="borderBottom"></div>
</form>
<h3>Classrooms:</h3>
<ul>
<% for (i=0; i<user.classes.length; i++) {let classroom = user.classes[i]%>
    <li class="list-classes">
        <%= classroom.className %> 
        <form class="confirm-leave leave" action="/class/<%= classroom.id %>?_method=delete" method="post">
			<button type="submit">Leave</button>
		</form>
    </li>
<% } %> 
</ul>

<% if (user.adminReq.length) {%> 
<h2>Pending Admin Requests:</h2>
<ul>
	<% for (let classroom of user.adminReq) {%>
		<li><%= classroom.className %>
			<form action="/class/<%= classroom.id %>/admin-join" method="post" class="inline-form confirm-admin-join"><button type="submit" class="accept accept-deny">Accept</button></form>
			<form action="/class/<%= classroom.id %>/admin-deny" method="post" class="inline-form confirm-admin-join"><button type="submit" class="deny accept-deny">Deny</button></form></li>
	<%}%>
</ul>
<% } %> 
<script src="/javascript/cpCLass.js"></script>
<script src="/javascript/profile.js"></script>